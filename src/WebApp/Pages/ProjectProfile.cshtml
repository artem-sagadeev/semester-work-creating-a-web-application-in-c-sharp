@page
@using Microsoft.AspNetCore.Identity
@using WebApp.Models
@model WebApp.Pages.ProjectProfile

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@await Html.PartialAsync("Shared/_CreatorPreviewPartial", Model.ProjectModel)

@foreach (var user in Model.ProjectModel.Users)
{
    @await Html.PartialAsync("Shared/_UserMiniPreviewPartial", user)
}

@{
    //todo check
}
@if (false)
{
    <form method="post">
        <input type="text" name="text" placeholder="Whats new?">
        <button type="submit">Send</button>
    </form>
}


@foreach (var post in Model.PostModels)
{
    @await Html.PartialAsync("Shared/_PostPartial", post)
}

@{
    //data for subscription
    var userId = (await UserManager.GetUserAsync(User)).UserId;
}
<form method="post" asp-controller="Subsribe"  asp-action="SubscribeToProject" asp-route-projectId="@Model.ProjectModel.Id" asp-route-userId="@userId">
    <button type="submit">Follow</button>
</form>
