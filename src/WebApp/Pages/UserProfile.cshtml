@page
@using Microsoft.AspNetCore.Identity
@using WebApp.Models.Identity
@model WebApp.Pages.UserProfile

@inject SignInManager<ApplicationUser> _signInManager
@inject UserManager<ApplicationUser> _userManager

@await Html.PartialAsync("Shared/_CreatorPreviewPartial", Model.UserModel)

@foreach (var project in Model.UserModel.Projects)
{
    @await Html.PartialAsync("Shared/_ProjectMiniPreviewPartial", project)
}

@if (_signInManager.IsSignedIn(User) && (await _userManager.GetUserAsync(User)).UserId == Model.UserModel.Id)
{
    <form method="post">
        <input type="hidden" name="id" value="@Model.UserModel.Id">
        <input type="text" name="text" placeholder="Whats new?">
        @*todo add image*@
        <button type="submit">Send</button>
    </form>
}

@foreach (var post in Model.PostModels)
{
    @await Html.PartialAsync("Shared/_PostPartial", post)
}

